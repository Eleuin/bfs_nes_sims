	TODO

- PRG1 _rle_nt_res_queue, _rle_extnt_res_queue routines are similar to above ones. merge

	NEW BUGS

- Ship object can stuck in a pond or at the map side forever sometimes. Also may be invisible because of that.
- New graphs for money flow still not working well for negative values.

	WHAT DONE

- Removal of the garbage data and commented out all unreferenced data and code for further possible usage, if any.
- Cleanup some portions of the code, minor optimizations on size.
- Macrofication of the code for much more readable listing.
- Commented as much as possible code and data which i clearly understand what it does and sometimes some thoughts about how those people wrote this program.
- Optimized redundant or duplicated code chunks, similar routines merged and used as common system routines. Overall reducing of the code more than 4Kb without any changes to the game's logic (except maybe timings and sometimes RNG as a result of this).
- Fixed BUGS#1
- Fixed BUGS#2.1, put the nmi wait calls to force buffers flush after any ppu queue. This also makes the turbo button work slower, but no more buffers overflows there.
- TODO BUGS#2.2
- Fixed BUGS#3
- TODO BUGS#4
- Fixed BUGS#5, also removed redundant CPU cycles at Scenario select screen due to RAM address mistake there.
- Fixed BUGS#6
- TODO BUGS#7
- Fixed BUGS#8
- Fixed BUGS#9, for square channels.
- Fixed BUGS#10
- TODO BUGS#11
- Fixed BUGS#12.1
- Fixed BUGS#12.2
- Fixed BUGS#13
- Fixed BUGS#14
- Fixed BUGS#15
- Fixed BUGS#16
- TODO BUGS#17
- TODO BUGS#18
- Fixed	BUGS#19
- Fixed BUGS#20, workaround somehow, there are a lot of paches needed to fix it in the original version, but can be patched much more easy in recompile if throw the difficult settings out of resetable area of the game variables. Currently it may cause some errors if I made any mistake in disasm, so let it just a workaround now. But it's work.
- TODO BUGS#21
- TODO BUGS#22
- Fixed BUGS#23.1
- TODO BUGS#23.2
- TODO BUGS#23.3
- TODO BUGS#23.4
- Fixed BUGS#24
- Fixed BUGS#24.1
- Fixed BUGS#24.2
- Added UNFINISHED#1.4, now "FREEDOM" scenario treated as a Practice mode with Freedom map and speed setting of the Scenarios (SLOW).
- Restored UNFINISHED#3 sound effect, can be heard with var $00F1 set to value $80. Still have no idea where it should be used.
- Restored UNFINISHED#5 Ship object using existing movement logic with some corrections to work somehow. Some wrong code was removed (UNFINISHED#5.1-#5.5). Also fixed UNFINISHED#5.6. The specail water tile isn't used, ship will sail anywhere randomly on the map. Since there are some special tiles on the Detroit map, the code to handle a special bridges is left.
- TODO Make ship able to sail under the bridges and road/wires with hiding animations.
- TODO Re-use the actual FE water tile for those scenarios which use it.
- TODO UNFINISHED#7, proper fixed point conversions, re-use scaler values calculated once store, scale two adjascent graphs by it's max values combined (so we could see the actual relative values).
- Restored UNFINISHED#9 4-frame animation for Helicopter. Have no idea wether it was removed on purpose or by accident. 4-frame looks much more blinking, maybe epilepsy issues?
- Restored UNFINISHED#14, moved the FAR routine to the local PRG9, so fixed problem with damaging the decimal buffer.
- Added attributes of the pressed buttons on the Name Entry Screens are now not inverted while pushed. However, they may invert it on purpose, but this looks odd actually. The evidence it may be done on purpose that non-sprite push button ("CL") animation uses attr switch the same way as sprites does.
- Added random turn logic for Ship object to be similar to the SNES version also all the missing code for selecting the deploy position and deploying the object.

	CODES

- At any time during the game, press A + B + Select + Start on controller 1 to Soft Reset.
- At the title screen, press A + B + Up + Left on controller 2 to clear SRAM data.
- During the game in any mode, at any message window (disasters, hints, information), press at the same time A + B on controller 2 and all D-Pad buttons Up + Down + Left + Right using both controllers in any combination (Up + Left on controller 1 and Down + Right on controller 2, etc.). Release all buttons. Now, hold one of the D-Pad buttons on both controllers at the same time (for example hold Right on controller 1 and Right on controller 2, etc.), while holding these buttons, press once any other D-Pad button on controller 1. Exit the message window either with A or B on controller 1. A message "I AM GOD   I WISH YOU HAPPY" will scroll at the game' HUD instead of regular alert messages and a debug mode is toggles ON. Do the same operations one more time to toggle this mode OFF with another message "I AM GOD   DEBUG OFF". The debug mode makes some changes to the gameplay:
	- All constructions cost no money. However, the budget income/outcome still work.
	- Be able to place any number of buildings at any position without collision check (causes a lot of glitches if heavily obused).
- You might not know this but any of 5 small menu windows with the game settings or info (SPEED, OPTIONS, disasterS, WINDOWS, GAME) can be moved across the screen. To do this, put cursor to the upper-left corner of the window, hold A, then move it with D-Pad buttons. Each window will memorize its last position for the rest of the current game. However, the windows positions can't be saved and lost when exit from the game.

	UNFINISHED

UNFINISHED#1. There are 6 regular scenarios available at the beginning. When you beat 6 regular scenarios, two additional scenarios will be available: "Las Vegas UFO" and "Freedom".
	UNFINISHED#1.1 Both have no briefing texts and window headers, only blank windows.
	UNFINISHED#1.2 Both have no completing conditions, both are infinite and cannot be completed.
	UNFINISHED#1.3 Scenario "Las Vegas UFO" should have an UFO object as a disaster judging from its name. The CHR ROM contains two set of tiles for two frames of the large UFO animation with a tractor beam. However, there aren't any other mentions in game messages nor game code for such type of disasters/objects. There is no sprites data associated with it as well. It is just not implemented at all.
	UNFINISHED#1.4 Scenario "Freedom" have proper map data but have no any proper scenario parameters to load. So all flags, money amount, game settings are be semi-random at start. CAN'T BE PATCHED.
UNFINISHED#2. There are 5 name buffers inside
	UNFINISHED#2.1 First is your town name, default name "SIMCITY".
	UNFINISHED#2.2 Second is what you enter as a favorite word, used as a sister town name during the game in New Town mode, if not entered, used the default name. In practice and scenario modes is blank, so message about sistership of towns will lack the name of the City at all.
	UNFINISHED#2.3 Third name used as bank name inside the message resourses, but never initialized with any value, always blank, the same as with blank sister town name.
	UNFINISHED#2.4 Two more are unused completely.
UNFINISHED#3. One of the SE effects unreferenced and there is not known where it should be used. DEMO GG: AKOXTGAA+YSXZPKAP (replaces one of the used sounds with it, write $08 to $00F1 address in RAM to hear a new one).
	UNFINISHED#3.1 Unused sound can be heard by setting var $F2 to value $10. Some kind of low alert buzzer. Maybe for unclear meltdown alert which has no any special indication otherwise
	UNFINISHED#3.2 To another unused sound, set $F2 to value $80. Another kind of click or cancel sound line unreferenced one.
UNFINISHED#4. There are total 25 messages for scroller line at the game's HUD. Only 16 are handled by the game engine.
	UNFINISHED#4.1 Used from 0 to F except B ("Blackouts"), also 18 ("Heavy traffic report") in a custom handler. The rest of messages aren't used at all.
	UNFINISHED#4.2 Most of them are about disasters and crashes and duplicates the ingame alert messages.
	UNFINISHED#4.3 Some events doesn't appear in this version ("Helicopter crash", "Shipwreck reported", "Train crash", "Hi unemployment rate", "City gone broke", "Explosion", "Brownouts"). See the full list of events in the table below.
UNFINISHED#5. There are currently 3 different kind of vehicles visible on the map: a Heli, an Airplain and a Train (its indexes correspondingly 0, 1 and 3). The missing vehicle object with index 2 has most of its code programmed. Judging from the unused CHR data tiles this should be a Ship. The map overview mode displaying all vehicles as a small letters. For used vehicles has accordingly "H" (Heli), "A" (Airplane) and "R" (tRain). Unused vehicle should be displayed as "S" (Ship) correspondingly.
	UNFINISHED#5.1. There is an unfinished leftover code from an old attempt to calculate the starting position for unused Ship vehicle. It executes every time when the game engine counts sea ports and trying to search for a specific tile in the map buffer ($FE) then it should set the starting position of the ship, which never used because there is no Ship deploy code in the ROM at all. This also takes a lot of redundant CPU cycles. FIX GG: SUEXUEVN+TNOXUATP (disables unused check at all).
	UNFINISHED#5.2 The search loop stop conditions uses the buffer size instead of the end of the buffer offset so this loop may search through all CPU space, wrap to RAM and ends something in RAM MIRROR area but can stop earlier because there are some $FE bytes in the PRG code.
	UNFINISHED#5.3 In any cases, all mentioned code doesn't calculate the correct Ship position, just the last position of the Sea port, which isn't correct, because usually, the $FE tile routes doesn't connected with the Sea ports and ship would just stuck inside the Port or on the ground near it.
	UNFINISHED#5.4 The special water tile $FE used only in one map for Detroit Scenario even while other scenarios has the Sea Ports as well. The New City mode can generate routes automatically for river-types of the maps, and does not generate them for isle-type maps. So We couldn't see the ship for many of maps used in game, even if there is a port.
	UNFINISHED#5.5 Only two portions of code are looking for a special water tiles either to retarget the ship (object movements routines) or build a special road tiles (construction routines) which intercept the special sea tiles to make some kind of "bridges" (see APPEND C). However, the rest of the code does not aware about special "bridge" tiles or special water tiles to make all this stuff working together properly. Even the Ship movements code knows about sailable waters but does not know about "bridges".
	UNFINISHED#5.6 The unused Ship vehicle has two sets of sprites for years before and after 1950. Sprites 5 and 6 of the first set are broken, as well as sprite 3 of the second set. CAN'T BE PATCHED
UNFINISHED#6. In the data for in-game menus there are two unused "YES/NO" windows: "DO YOU QUIT PLAYING WITHOUT SAVING?" and "DO YOU WANT TO START NEW CITY?". Both unused. In all cases except "LOAD GAME" the common "SAVE GAME" menu used instead.
UNFINISHED#7. Every year, the current state of city parameters are stored in the graphs arrays. Since all values used here are fixed point, they attempt to scale them down to 8-bit fixed values, also calculate the max value for further scaling. However, this scaling value never used, the actual graphs display routine calculate it's own max value and scaling factor for each graph independently.
UNFINISHED#8. Auto Budget setting in Options does nothing. Budget is planned and trimmed automatically always, and the Budget screen can't be disabled or skipped during the game.
UNFINISHED#9. Helicopter sprites contain a 4 frame animations of the flight for every movement direction. However, only two of four used for some reason. FIX GG: 039-E37-E6E
UNFINISHED#10. There are a lot of unused CHR data for BG objects:
	UNFINISHED#10.1 BANK1E, TILES 0C 4x4 (Airport Terminal 2)
	UNFINISHED#10.2 BANK1F, TILES 0C 4x4 (Airport Terminal 3)
	UNFINISHED#10.3 BANK48, TILES 14 2x2 (Extra Park 2)
	UNFINISHED#10.4 BANK48, TILES 1D 2x2 (White House 2)
	UNFINISHED#10.5 BANK49, TILES 00 2x2 (White House 2)
	UNFINISHED#10.6 BANK49, TILES 03 2x2 (White House 3)
	UNFINISHED#10.7 BANK56, ALL TILES, BANK57, TILES 1B,1C,2C,3C,1D 2x2 (complete sets for Nascar Track and two Baseball staduims building along with animations)
UNFINISHED#11. Also there are a little bit of ingame-icons:
	UNFINISHED#11.1 BANK20, TILES 20 8x2 ("CLEAR" tablet)
	UNFINISHED#11.2 BANK2B, TILES 16 2x2 ("BANK" icon with frame)
UNFINISHED#12. Message windows during the game has a various animation sequences depending on current message. There are 19 sequences are used for 10 scenes. Sequences 6 to 11 intended to be used in 4 additional scenes but they isn't. To see each of 4 unused scenes use FIX GG codes and open default hint window during the game by pushing to the "HINT" button. The evidence that the game should have 4 more hint messages is that there are two of the arrays has 40 entries instead of 36 (the number of hint messages currently, see APPEND A below).
	UNFINISHED#12.1 Scenes 6-7. Uses the same sprites as for Traffic Jam message, but the "Mayor" character stands still at the rightmost window size and constantly looking to the left sweating. The closed door animation in the center of the window which someone badging from the outside. Sprites of it never appear elsewhere. Both animated sprites together exceeded the 8 sprites per line limit and thus the "Mayor" missing part of its face. Probably should have been used when the city gone broke at some point, but there are no such warning in current version. FIX GG: ZAEAPGPA+TANAPGLA+YANAZGGA
	UNFINISHED#12.2 Scene 8. The "Mayor" character stand with his back toward us. Sprites never used before. Animation very short. Usage isn't clear. FIX GG: AANAPGLE
	UNFINISHED#12.3 Scene 9. The mayor character at the middle of the screen with crutch and a bandage on its head, explaining something. Sprites aren't used enywhere else also. Most probably should be used for earnings about disasters or low funding of medicine. FIX GG: PANAPGLE
	UNFINISHED#12.4 Scenes 10-11. The "Mayor" character constantly running from the left side to the right side of the window. The green cloud is floating after him. Most probalby this animation is for pollution warning message. Also exceeded the 8 sprites limit at some point. In any case, there aren't messages of pollution warning in the game. FIX GG: ZAEAPGPA+ZANAPGLE+LANAZGGE+LUEZYALU
UNFINISHED#13. While build transport and power lines on the Water, there are no code for testing a valid bends with water type of tiles. You can do only straight lines continuing other straight lines. Can't bend the road on the water. Just can connect with another straight line starting from the grounds.
UNFINISHED#14. The New city generation screen has 6 small triangle buttons at the borrom-right corner for selecting the map number. There are two tiles for drawing the regular and pressed buttons. There even has some portions of code that loads pressed button tile indexes. But then code goes to number rorate animation code and the pressed button tiles are never showed. The problem was that the button anim code reside in external bank and the FAR call routine uses the tmp values at $000,$001,$002 addresses in RAM, the same addresses used by the number display routine to store an actual decimal value. So they just removed one extra call for the sprite, fixed the glitch but disabled the button pressing animation.
UNFINISHED#15. Although Difficult setting non functional in original game (see BUGS#20) there are some portions of the code that depends on Difficult setting, all of them however has no effect on the original game.
	UNFINISHED#15.1 Starting amount of money on Easy is 20000, on Normal - 10000, and 5000 on Hard.
	UNFINISHED#15.2 Tax Rate value higher to 1 on Normal and to 2 on Hard modes while calculating the RCI growth values of the City. So you may have Tax Rate at 7, but the RCI levels will be calculated as if it 8 on Normal or 9 on Hard correspondingly.
	UNFINISHED#15.2 Fund requested for transport calculated as (roads+(rails*2))*coeff. Where coeff = 0.7 for easy, 0.9 for Normal and 1.2 for Hard. (exactly from Micropolis sources, see s_sim.c, line 641, CollectTax(void))
  	UNFINISHED#15.3 Overall Tax Collected value calculated as (R_L+C_L+I_L)*overall_city_value*coeff*0.71*tax_rate. coeff = 1.4 for Easy, 1.2 for Norman and 0.8 for Hard. ((exactly from Micropolis sources, see s_sim.c, line 641, CollectTax(void)))
	UNFINISHED#15.4 However, unless the SNES version, the NES does not explode Nuclear Power stations randomly for Normal/Hard modes. The Nuclear Meltdown only available for BOSTON scenario and even has no Alert message corresponding to it. Nuclear meltdown occurs with only a sound and "GOTO" button activated.
UNFINISHED#16. There is an unused unreferenced type of Fire disaster which fires half of the Fire disaster tiles on the map at once. In the original Amiga/DOS/C64 versions there was a Scenario for Hamburg Germany 1944 Bombing. There is no such disaster in later version of this game (but there were screens on earliest versions), but such unreferenced type of didsaster clearly evidence that they planned it somehow at some point.
UNFINISHED#17. There is an unused music command in a music engine code that adds a different type of envelope calculation to the note. If you replace all regular notes with such alt enveloped this will sounds like under water or maybe like in UFO-style. No music sequences are using it at all. Probably this is a leftover of the unimplemented UFO object?
UNFINISHED#18. Pollution value calculated once per THREAD1 loop, but used currently only for calculating overall city problems list. Never used for any alerts display as well as not used for Graph screen because of BUG#23.

	BUGS

BUGS#1. Var at $6CC RAM address is a temporary variable used in many places of the program to store intermediate calc data. However, most of the time it has a value of POWER STATIONS counter, which is calculated every game iteration. This var used exactly as a POWER STATIONS count for the warning scrolled messages tests. Although it used for calculations at the end of the fiscal year and has a semi-random value immediately after the year budget screen is closed, this has no really significant effect to the game and message triggering except the case this semi random value gets ZERO, which is rarely possible.
BUGS#2. Use the turbo button A on some input screens to glitch the screen because of ppu queue buffer overflow due to lack of proper sync. CANNOT BE PATCHED
	BUGS#2.1 Name input screen.
	BUGS#2.2 Budget money adjust screen.
BUGS#3. There is an unused disabled branch in Practice mode to check if you go well or bad during this game. This branch should check your town population after year 1906 (should be 30000), then send a message if you did it well or you need more practice. For some reason they decided to disable it. Or just make bug in a selection logic. FIX GG: GESLGPTZ.
BUGS#4. Some events haven't appear automatically when you get it (see table below) due to some sort of hardly visible bug with indexes comparisons. In case you get this bug, you need to go open Hints menu manually in order to obtain a Special item. Most of events works just fine, there only 2 of them which are affected. With this bug you may loose your current present if any other message appear before you go to the Hint screen.
BUGS#5. The extra scenarios selecting screen code trying to draw "CLEAR" icons on unlocked scenarios, but there aren't proper icon position data for that, so if you manage to beat at least one of them, the scenarios select screen will glitch, if you beat both, game will hang. This is not really important at all, because you just can't beat any of extra scenarios. NO PATCH NEEDED
BUGS#6. First briefing messages has a couple spelling errors and incorrect placeholders. CANNOT BE PATCHED
BUGS#7. There is non-critical bug in present items free slot search routine. In case you have no free slots, it will run for 256 loops of dummy cycle instead of just exit. No side effects in this except missed CPU cycles.
BUGS#8. At BANKB:$A8D9 there is a calculations which fetch power grid buffer data, then test if the particular tile is powered up or not. The opcode at BANKB:$A90E (AND $A3B6,X) refers to the bitmasks table from BANKA, but in BANKB it refers to the portion of the game's code so masking will get the wrong result most of the time, reporting are powered while they are not or vice versa. Seems they overlooked this when moving the code around. To fix in in current ROM. FIX GG: KIEXNPVU+OLOZEPUX.
	BUGS#8.1 Also, there is a counter of all map tiles that were tested and has power, some kind of "power consumption" level. But it never used. Instead, there is only one flag used in overal calculations if tile is powered or not. Seems we have bug in some calcs out there, which may use wrong values instead of proper ones.
BUGS#9. Sound is cracking sometimes in two channels. FIX GG: EPXXYZNP (for square channel only, a courtesy of Chris Covell).
BUGS#10. When airplane crashes, it's damaging one particular tile on the map with enabling "GOTO" alert button. However, due to copy-paste bug, the coordinates of "GOTO" are wrong and not points to the crash site. FIX GG: KEEAGEVE.
BUGS#11. Pollution area zone calculated as a sum of weights of the tiles for every 4x4 map area. Weights are follow: developer I area +2 for a tile (+8 for 2x2 building), coal power station +3 for a tile (+36 for 3x3 building), flooded ground +15 for a tile, the rest gives 0. Looks odd, right? Why flooded ground counts as max pollution instead of radiation waste ground? Looks like a bug to me.
BUGS#12. Tere is a var $67D, which never written by any code, but read sometimes and used in calcs.
	BUGS#12.1 It is used for "Fires" parameter of City problems list calculations (param = {_fires_level * 5}, i.e. clamp to FRAC part of fixed point value). So this is definitely one lost parameter which isn't calculated in NES code.
	BUGS#12.2 Also it summed with police stations counter in city assessed value calculations. Based on Micropolis source code, police station counts clearly summed with fire station counter.
BUGS#13. The clear routine clears only the lower nibble of _city_assessed_value not touching the high ones and then immediately clears the _annual_score_change var which is temporary recalculated var actually sitting near the _city_assessed_value ram address. There is unknown if they wether missed two more bytes to be cleared or clear a wrong vars instead.
BUGS#14. City assessed value recalc routine have a major calc mistake: 6 out of 9 parameters has wrong weight multipliers, basicly they swapped hi and low nibbles of the 16-bit constants. So instead of weight of hospitals $0190 (decimal 400) we have $9001 (decimal 36865) and so on.
BUGS#15. Monster disaster appearance logic choses randomly the appearnce point inside the map, then calculates the destination point based on what side of the map is farther (by one of directions) and one random position on that side. The random selection routine stores both X and Y destination coordinates in the same _obj_dest_pos._monster._COL variable. The most noticeable result of this bug is at that the first appearance with higher probability the monster will go UP on the map.
BUGS#16. Graphs screen data ranges (10/100 years) button-selector of the by default always 10 but not pushed upon entry to the screen. Press it after that does nothing. Only when you press 100, then again 10 it will be drawn correctly.
BUGS#17. Power consumption calculated as: TOTAL_POWER = COAL*700+NUCLEAR*2000 pts. Every single powerable building tile and every electric wire consume 1 pt. Due to recursive method of collecting the network data, there will be extra power points consumed according to placement and location of adjascent buildings. So the same amount of building may consume more or less power just because of placement and grouping of the buildings.
BUGS#18. Sometimes, at the beginning of the Practice mode, when game message window appears at the same time as scroller message on the screen, the R left at the left-top corner.
BUGS#19. Game cursor not disables when the game message window appears. to reproduce, start practice, enter info screen maps, exit and enter a message hint or wait for the first practice message. CANNOT BE PATCHED
BUGS#20. Difficult settings does not work for New City mode. Although it can be selected, it will clear at the beginning of any game mode, so in any case you'll play on EASY by default. CANNOT BE PATCHED
BUGS#21. When you buid a present, a corresponding item removed from the list and when empty disables the menu. If you select first one and build a present, then you'll be able to build a second present immediately. They will be properly removed from the list. However, if you choose to build the second prize first, then immediately build another one, you'll build a glitched construction that can't be removed or bulldozered. CANNOT BE PATCHED
BUGS#22. Some electric tiles near the water electric tiles treated as non-powered in some cases.
BUGS#23. Graphs calculations slightly broken and mangled.
	BUGS#23.1 For R it should multiply level value by 2, but instead multiplied integer part of value with itself. The R levels usually are in range 1 to 2, so most of the time we have roughly rounded integer value for this in case of this bug.
	BUGS#23.2 For "Pollution" button they uses crime level value instead.
	BUGS#23.3 For "Money" button they uses highest nibble of money without highest bit which means only money above 65535 will be documented and used also this means they used copy-pasted code here from previous calculations.
	BUGS#23.4 For "Crime" button they uses tax income value which may be positive or negative. They attempted to att signed values to graph by shifting the Y axis to -128, but didn't tested the tax incom value for negativeness at all, so all negative values turns max parameters when clamped.
BUGS#24. City problems list calculation routines has also at least one more major mistake that gets semi-random results on the overall calc in addition to _fires_level usage (not counting they are semi-random by design). One of the problems (unemployment) uses RCI proportion as a test value: param={L_R/(L_C+L_I)*8} also clamped to FRAC portion of fixed point value. However, calc routine stores divider in wrong temporary variable. Shoulbe go to $EA-$EB, but gets to $E7-$E8 instead. INES FIX PATCH: $14C43: EA, $14C4B: EA, $14C4E: EA, $14C51: EA, $14C54: EB, $14C56: EA.
	BUGS#24.1 Clamping RCI proportion to 0.999 also seems wrong. Uses this equation we calc how much times residental zones development level higher than C+I level combined, means how much unemployed people there are. When unemployment is high, INT portion of result should be non-zero. For all values >=1.00 we have truncation. So we will get highest level of unemployment even if all people are working (R=C+I). This sounds kinda wrong. Micropolis source subtract 1.00 from result of proportion and then truncate to 0.999, then we have correc values for all cases!
	BUGS#24.2 The problem sorting routine looks kinda wrong as well. It skips problem with the same amount of percents and takes only the last one of them, also for many cases it takes not the greatest ones.

	MISC

MISC#1. There is an automatically spawned helicopter for observing the road traffic. It fly randomly and every iteration its coordinates tested against the traffic map. If helicopter hovering over the traffic location with density above 9 it will report about it with DPCM speech and a scroller message. Judging from the message index (18th, the last one in the list) and the fact that all previous messages aren't used at all, we may presume that this heli message and sound were added to the game at the late stage of developement with a quick and lazy method, avoiding the regular message system and called from the top of the system loop.
MISC#2. The game engine consists of two main separate mostly independent parts. First is an interface and display control part. It handles all inputs, menus, drawing graphics, screen objects/sprites manager, disasters manipulation. The second is a city control and statistics collector part. It does all city specific calcs on population, industry, energy, pollution and traffic. Does statis and charts for info displays, etc... Both parts constantly does its own work in loop, never stop. The most interesting part, they work like some kind of threads in parallel. The threads manager in NMI handler switches between two process through stack manipulation, so both work some kind in parallel. The interface thread has a priority on a man activity. If you press any button, it will take control instantly, and city calcs will be halted. In other way, the city calc part can raise a flags to forbit some portions of the interface code to read the data it calculating now. I have not seen such engine in any game before. Usually, threading methods used in a scripted engines. This is the first game I've seen that do it on the native code. Basicly, this method can be used for multi-threading operation systems for NES, the problem is just in a very small stack.
MISC#3. For some reason until you get the City Status and build a Bank, you have only 3 free Special events slots. The rest of the game you'll have 4 slots. However, if all your slots are full, any pending event will wait until any empty slot appears.
MISC#4. The word "ISHI" is used as a RAM signature for Soft/Hard Reset test.
MISC#5. All music tracks are used in the game. Most of tracks used to highlight the town population value. some tracks are "paired" and consists of two conjuncted parts. An intro and looped main track (01/02 title, 08/10 practice, 48/50, 60/40 information).
MISC#6. Sound engine tables the same as in Nintendo games: Baloon Fight, Duck Hunt, Gumshoe, Gyromite, Hogan's Alley, Stack Up, Wrecking Crew. Definitely, the sound engine was based on the engines for these games. All has similar way to play SE by setting flag bits and so on. However, as against the Sound Engine for Wrecking Crew for example, this one written highly briefly, unoptimal. There is no channel data and code unification, has a different set of commands, lack the loop commands at all, so music data and code are largely oversized.
MISC#7. With the Micropolis source codes it is easier to understand some odd things in the NES code, most of this described in the comments in the current sources. The main Micropolis engine were taken mostly exactly the same with some small insifnificant changes due to optimizations or rough fixed point rounding errors.

	APPEND. A - EVENTS/PRESENTS

	EVENT						REQUIREMENTS			RESULTS						REPEATS				MESSAGE APPEAR
01	Becomes a Town 				2000 population			history record				once per game		yes
02	Becomes a City				10000 population		history record,				once per game		yes
														present "White House"
03	Becomes a Capital			50000 population		history record				once per game		yes
04	Becomes a Metropolis		100000 population		history record				once per game		yes
05	Becomes a Megapolis			500000 population		history record				once per game		yes
06	Traffic is bumper to bumper traffic level 7			-							every recalculation	yes
07	Commuters are grid-locket	traffic level 2			- 							every recalculation	yes
08	Crime rate is much too high	crime level 7			-							every recalculation	yes
09  Monster disaster			scenario specific		monster appears,			scenario specific	yes
														destroy all on its path
0A	Eartquake disaster			scenario specific		ground shake,				scenario specific	yes
														destroy random areas
0B	Bank wants to build office	5 years after White		present "Bank" 				once per game		yes
								House has built
0C	City wants relationship		150000 population		relationship begin			once per game		yes
0D	Open amusement park			120000 population		present "Amusement Park"	once per game		yes
0E	Open a Zoo					250000 population		present "Zoo"				once per game		yes
0F	Open a Casino				200000 population		present "Casino"			once per game		yes
10	Build an extra land			2 sea ports				present "Extra Land"		once per game		no, see BUGS#4
11	New Police Station			10 police stations		present "New Police St."	once per game		yes
12	New FireStation				10 police stations		present "New Fire St."		once per game		yes
13	10th anniversary monument	practice/city JAN 1910	persent "10th Monument"		once per game		yes
14	100th anniversary monument	practice/city JAN 2000	present "100th Monument"	once per game		yes
15	Holding World Expo			practice/city JAN 1950	expo starts					once per game		yes
16	Erect Expo monument			practice/city JAN 1951	present "Expo Monument"		once per game		yes
17	Statue of Liberty present	practice/city 10 years,	present "Liberty"			once per game		yes
								after City Sistership
18	Build a Library				70000 population		present "Library"			once per game		no, see BUGS#4
19	Parks expand				200 park squares		present "Extra Park"		once per game		yes
1A	Railroad Station			150 rail squares		present "Railroad St."		once per game		yes
1B	Practice Intro				Practice FEB 1900		-							once per game		yes
1C	Practice Hint				Practice FEB 1901		-							once per game		yes
1D	Practice mode Failed		Practice FEB 1905,		-							once per game		no, see BUGS#3
								<30000 population
1E	Practice mode Complete		Prectice FEB 1905,		-							once per game		no, see BUGS#3
								>=30000 population
1F	Bank Hint					Bank has build			"BANK" button enabled		once per game		yes
														at Budget screen
20	Fire disaster				manual request			burn random areas			scenatio specific	yes
21	Flood disaster				scenario specific		flood shore areas			scenario specific	yes
22	Airplane Crash				random or when PLANE	destroy single area			scenario specific	yes
								collide with HELI
23	Tornado disaster			scenario specific		destroy all on its path		scenario specific	yes

	APPEND B. SCROLL MESSAGES

	MESSAGE										REQUIREMENTS				FORCED		NOTES
00	MORE RESIDENTIAL ZONES NEEDED				R<(R+C+I)/4					no			-
01	MORE COMMERCIAL ZONES NEEDED				C<(R+C+I)/8					no			-
02	MORE INDUSTRIAL ZONES NEEDED				I<(R+C+I)/8					no			-
03	MORE ROADS REQUIRED							(R+C+I)>=10, (R+C+I)>ROADS	no			-
04	INADEQUATE RAIL SYSTEM						(R+C+I)>=50, (R+C+I)>RAILS	no			-
05	BUILD A POWER PLANT							(R+C+I)>10, POWER=0			no			see BUGS section #1
06	RESIDENTS DEMAND A STADIUM					R_L>=500fp, STADIUM=0		yes			-
07	INDUSTRY REQUIRES A SEA PORT				I_L>=100fp, SEAPORT=0		yes			-
08	COMMERCE REQUIRES AN AIRPORT				C_L>=150fp, AIRPORT=0		yes			-
09	CITIZENS DEMAND A FIRE DEPARTMENT			ALL_L>=60fp, SPOLICE=0		no			ALL_L=(R_L+C_L+I_L)
0A	CITIZENS DEMAND A POLICE DEPARTMENT			ALL_L>=60fp, SFIRE=0		no			ALL_L=(R_L+C_L+I_L)
0B	BLACKOUTS REPORTED  CHECK POWER MAP			-unused-					-			-
0C	CITIZENS UPSET  THE TAX RATE IS TOO HIGH	TAX_RATE>=12%				no			-
0D	ROADS DETERIORATING  DUE TO LACK OF FUNDS	RFUND_RATE<22%, ROADS>=30	no			-
0E	FIRE DEPARTMENTS NEED FUNDING				FFUND_RATE<11%, ALL_L>=20fp	no			ALL_L=(R_L+C_L+I_L)
0F	POLICE DEPARTMENTS NEED FUNDING				PFUND_RATE<11%, ALL_L>=20fp	no			ALL_L=(R_L+C_L+I_L)
10	A PLANE HAS CRASHED							-unused-					-			-
11	SHIPWRECK REPORTED							-unused-					-			-
12	A TRAIN CRASHED								-unused-					-			-
13	A HELICOPTER CRASHED						-unused-					-			-
14	UNEMPLOYMENT RATE IS HIGH					-unused-					-			-
15	YOUR CITY HAS GONE BROKE					-unused-					-			-
16	EXPLOSION DETECTED							-unused-					-			-
17	BROWNOUTS  BUILD ANOTHER POWER PLANT		-unused-					-			-
18	HEAVY TRAFFIC REPORTED						TRAFFIC>=10 under HELI pos	yes			see MISC#1

	APPEND C. MAP TILE INDEXES

		BUILDING					FLAGS	FLAG BITS
00-18	regular R area				CA		11001010
19		hospital					CA		11001010
1A		school						CA		11001010
1B-1F	-							-		-
20-38	C area						CA		11001010
39-3F	-							-		-
40-48	I area						CA		11001010
49-4F	-							-		-
50		police station				CA		11001010
51		fire station				CA		11001010
52-5F	-							-		-
60		coal power station			CA		11001010
61		nuclear power station		CA		11001010
62		sea port					CA		11001010
63		stadium						CA		11001010
64		air port					CA		11001010
65-6F	-							-		-
70		bank						CE		11001110
71		amusement park				CE		11001110
72		zoo							CE		11001110
73		casino						CE		11001110
74		reclaimed water ground		CE		11001110	*replaced with 90
75		new police station			CE		11001110
76		new fire station			CE		11001110
77		10th monument				CE		11001110
78		100th monument				CE		11001110
79		expo monument				CE		11001110
7A		liberty monument			CE		11001110
7B		library						CE		11001110
7C		park						CE		11001110
7D		train station				CE		11001110
7E		white house					CE		11001110
7F		-							-		-
80-8E	internal building's tiles	C0		11000000
8F		-							-		-
90		buldozered ground			02		00000011
91-9B	road						62		01100011
9C-A6	rail						52		01010011
A7-B1	electic						C2		11000011
B2		park grass					46		01000110
B3		park tree					06		00000110
B4		corrupt ground				02		00000010
B5		flooded ground				00		00000000
B6		polluted ground				00		00000000
B7-B8	road+rail					52		01010011
B9-BA	electric+road				E2		11100011
BB-BC	electric+rail				D2		11010011
BD		water						05		00000101
BE-CD	ground/water shores			06		00000110
CE-DF	unbuldozered ground			46		01000110
E0-E1	water+road					05		00000101
E2-E3	water+rail					15		00010101
E4-E5	water+electric				85		10000101
E6		fire ground					00		00000000
E7-EA	disaster ground anim		00		00000000
EB-EC	sailable water+road			05		00000101
ED-FC	diagonal road/water			05		00000101	*unused
FD		-							-		-
FE		sailable water tile			05		00000101
FF		-							-		-

		FLAG BITS	76543210

		7bit (80) - conduct power tile
		6bit (40) - corrupteable/burnable tile
		5bit (20) - road tile
		4bit (10) -	rail tile
		3bit (08) -	consume power tile
		2bit (04) - non-destructable tiles
		1bit (02) -
		0bit (01) -

